---
title: "Food Habits"
author: "Ricky Tabandera"
date: "12/2/2020"
output: html_document

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r data loading and cleaning}
library(tidyverse)
library(nmfspalette)
#list.files(here::here("data"))
load(here::here("data","allfh.RData"))
#prelimary function to summarize data


#pdgutw or pdgutv (predator gut weight or volume) fills in if a volume was taken (converts to cubic cm to grams and visa versa with pdgutv)
#avoid pdswgt as it is incomplete 
# there are a number of different resolutions you can use: gencat (or gensci) is the coarsest-- all fish, and phyla of inverts; analcat is middle-- fishes to family, inverts to class; and collcat-- fish to species, inverts to class/family some species. Of course most of the diet samples aren't IDed to species due to digestion levels, so many stomachs include fish uncl (fish unclassified), AR (animal remains), or broad categories of fish or invertebrates (e.g. gadid, bivalve etc.).

# extract out the relevant cols by 

fh_cod<-allfh %>% filter(pdcomnam=="ATLANTIC COD") %>% select(pynum, pyperi, pywgti, pyvoli, pylen,pyamtw, pyamtv, perpyv, perpyw, pdscinam, pdcomnam, pdcomnam, svspp, gensci, pyamtw, year,season, gencat, gensci, analcat, analsci)

freq_cod<-fh_cod %>% group_by(year,analsci) %>% summarise(occ=length(analsci)) %>% mutate(freq= occ/sum(occ))
freq_cod<-freq_cod %>% mutate(SWDI= -freq*log(freq))
sum_cod<-freq_cod %>% group_by( year) %>% summarise(per_year_SWDI= sum(SWDI))



sum_cod %>% ggplot2::ggplot(aes(x=year,y=per_year_SWDI))+geom_point()+geom_line()

cod_1973<-freq_cod %>% filter(year==1973)
sum(cod_1973$occ)
sum(cod_1973$freq)


#diversity index H is p


#shannon diversity index (H) measure of diversity where richness is weighted by evenness where larger index values can either be richer or more even
#alterntives are simpsons D


```

## Including Plots

You can also embed plots, for example:

```{r diversity plot, echo=FALSE}



```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
