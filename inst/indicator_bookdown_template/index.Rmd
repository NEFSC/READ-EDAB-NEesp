---
title: "`r params$species_ID`"
author: "Abigail Tyrell"
date: "`r format(Sys.time(), '%d %b %Y')`"
site: bookdown::bookdown_site
output: 
  bookdown::gitbook:
    split_by: section
documentclass: book
github-repo: NOAA-EDAB/esp_data_aggregation

language:
  ui:
    chapter_name: "Section "

params: 
  species_ID: "Acadian redfish" # common name of species

  asmt_sum_source: "assessmentdata::stockAssessmentSummary"
  asmt_source: "assessmentdata::stockAssessmentData"
  survey_source: "survdat"
  
  ricky_survey_data: bio_survey # ricky survey data

  cache: FALSE
  
  path: "" # figure path
---

# `r params$species` {-}

```{r, setup, include = FALSE}
knitr::knit_hooks$set(time_it = local({
  now <- NULL
  function(before, options) {
    if (before) {
      # record the current time before each chunk
      now <<- Sys.time()
    } else {
      # calculate the time difference after a chunk
      res <- difftime(Sys.time(), now) %>% round(digits = 2)
      # return a character string to show the time
      paste("Time for this code chunk to run:", res)
    }
  }
}))

knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE,
  # time_it = TRUE,
  fig.width = 8,
  fig.align = "center",
  fig.cap = params$species,
  fig.path = params$path
  # cache.path = here::here("bookdown/cache/", "")
)
```

```{r, species_data}
# data used in multiple chapters
species <- params$species_ID

risk_data <- risk[risk$Species == species, ] %>% 
  missing_na()

risk_year_hist_data <- risk_year_hist[risk_year_hist$Species == species, ] %>% 
  missing_na() 

risk_year_value_data <- risk_year_value[risk_year_value$Species == species, ] %>% 
  missing_na()

risk_species_data <- risk_species[risk_species$Species == species, ] %>% 
  missing_na()
```

This is a preliminary report of previously collected data. This report is pulling information on all Northeast `r species` stocks.
